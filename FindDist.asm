; FIND DIST

; in: x, y dir
;	X Y   DWANTED

	LOAD 	DWANTED
	JPOS	DWNOT0
	; ------------ DW0 -----
	LOAD	Y
	SUB		TWO
	JPOS	DW0X6	; OTHERWISE X TOTAL IS 4, Y <= 2 
	LOADI	4
	SUB		X
	STORE	DISTFRONT
	LOAD 	MASK5
	STORE	MASKSEL
	LOAD 	Y
	SUB		ONE
	JZERO	DWIS0
	JUMP	DWIS1
	
DW0X6:
	LOADI	6
	SUB	 	X
	STORE	DISTFRONT
	LOAD 	MASK0
	STORE	MASKSEL
	LOAD 	Y
	SUB		THREE
	JZERO	DWIS1
	JUMP	DWIS0

DWNOT0:		; DW1
	LOAD 	MASK0
	STORE	MASKSEL
	LOAD 	X
	SUB		ONE
	STORE	DIFFSIDE
	LOAD 	Y
	SUB		TWO		
	JPOS	DW1Y13
	LOAD 	Y
	SUB		ONE
	JZERO	DWIS1F
	JUMP	DWIS0F
DW1Y13:		
	LOAD 	Y
	SUB		THREE
	JZERO	DWIS1F
	JUMP	DWIS0F

DWNOT1:		; DW2
	LOAD 	X 
	SUB		ONE
	STORE	DISTFRONT
	LOAD	Y
	SUB		TWO
	JPOS	DW2X6	; OTHERWISE X TOTAL IS 4, Y <= 2
	LOAD 	MASK0
	STORE	MASKSEL
	LOAD 	Y
	SUB		ONE
	JZERO	DWIS0
	JUMP	DWIS1
	
DW2X6:
	LOAD 	MASK5
	STORE	MASKSEL
	LOAD 	Y
	SUB		THREE
	JZERO	DWIS1
	JUMP	DWIS0


DWNOT2: 	; DW3
	LOAD 	MASK5
	STORE	MASKSEL
	LOAD 	X
	SUB		ONE
	STORE	DIFFSIDE
	LOAD 	Y
	SUB		TWO		
	JPOS	DW3Y13
	LOAD 	Y
	SUB		ONE
	JZERO	DWIS0F
	JUMP	DWIS1F
DW3Y13:		
	LOAD 	Y
	SUB		THREE
	JZERO	DWIS0F
	JUMP	DWIS1F

DWIS0:
	LOADI	0
	JUMP	DWIS 
DWIS1:
	LOADI	1
DWIS:
	STORE	DISTSIDE
	JUMP	DWEND

DWIS0F:
	LOADI	0
	JUMP	DWISF 
DWIS1F:
	LOADI	1
DWISF:
	STORE	DISTFRONT

DWEND:
	RETURN


X:			DW 		0
Y:			DW 		0
DWANTED: 	DW 		0

MASKSEL:	DW 		0
DISTFRONT: 	DW 		0
DISTSIDE:	DW 		0